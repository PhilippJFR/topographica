
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>lancet.launch &mdash; The Topographica Neural Map Simulator</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/topo.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.98',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/topo.js"></script>
    <link rel="top" title="The Topographica Neural Map Simulator" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
<li><a href="../index.html">Home</a></li>
<li><a href="../Downloads/index.html">Downloads</a></li>
<li><a href="../Tutorials/index.html">Tutorials</a></li>
<li><a href="../User_Manual/index.html">User Manual</a></li>






      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="lancet-launch">
<h1>lancet.launch<a class="headerlink" href="#lancet-launch" title="Permalink to this headline">¶</a></h1>
<div class="inheritance_box"><img src="../_images/inheritance8744d36cfd.svg" usemap="#inheritance8744d36cfd" class="inheritance"/></div><map id="inheritance8744d36cfd" name="inheritance8744d36cfd">
</map>
<div class="section" id="module-lancet.launch">
<span id="module"></span><h2>Module<a class="headerlink" href="#module-lancet.launch" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="lancet.launch.CommandTemplate">
<em class="property">class </em><tt class="descclassname">lancet.launch.</tt><tt class="descname">CommandTemplate</tt><big>(</big><em>executable=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#CommandTemplate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.CommandTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="param.parameterized-module.html#param.parameterized.Parameterized" title="param.parameterized.Parameterized"><tt class="xref py py-class docutils literal"><span class="pre">param.parameterized.Parameterized</span></tt></a></p>
<p>A command template is a way of converting the key-value dictionary format
returned by argument specifiers into a particular command. When called with
an argument specifier, a command template returns a list of strings
corresponding to a subprocess Popen argument list.</p>
<p>__call__(self, spec, tid=None, info={}):</p>
<p>All CommandTemplates must be callable. The tid argument is the task id and
info is a dictionary of run-time information supplied by the launcher. Info
contains of the following information : root_directory, timestamp,
varying_keys, constant_keys, batch_name, batch_tag and batch_description.</p>
<p>Command templates should avoid all platform specific logic (this is the job
of the Launcher) but there are cases where the specification needs to be
read from file. This allows tasks to be queued (typically on a cluster)
before the required arguments are known. To achieve this two extra methods
should be implemented if possible:</p>
<p>specify(spec, tid, info):</p>
<p>Takes a specification for the task and writes it to a file in the
&#8216;specifications&#8217; subdirectory of the root directory. Each specification
filename must include the tid to ensure uniqueness.</p>
<p>queue(self,tid, info):</p>
<p>The subprocess Popen argument list that upon execution runs the desired
command using the arguments in the specification file of the given tid
located in the &#8216;specifications&#8217; folder of the root directory.</p>
<dl class="docutils">
<dt><em>param String</em> <tt class="docutils literal"><span class="pre">executable</span></tt> (<em>allow_None=False, constant=True, default=python, instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The executable that is to be run by this CommandTemplate. Unless the
        executable is a standard command expected on the system path, this
        should be an absolute path. By default this invokes python or the python
        environment used to invoke the CommandTemplate (eg. the topographica
        script).</dd>
<dt><em>param Boolean</em> <tt class="docutils literal"><span class="pre">do_format</span></tt> (<em>allow_None=False, bounds=(0, 1), constant=False, default=True, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>Set to True to receive input arguments as formatted strings, False for
        the raw unformatted objects.</dd>
<dt><em>param List</em> <tt class="docutils literal"><span class="pre">allowed_list</span></tt> (<em>bounds=(0, None), constant=False, default=[], instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>An optional, explicit list of the argument names that the
        CommandTemplate is expected to accept. If the empty list, no checking is
        performed. This allows some degree of error checking before tasks are
        launched. A command may exit if invalid parameters are supplied but it
        is often better to explicitly check: this avoids waiting in a cluster
        queue or invalid simulations due to unrecognised parameters.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="lancet.launch.Launcher">
<em class="property">class </em><tt class="descclassname">lancet.launch.</tt><tt class="descname">Launcher</tt><big>(</big><em>batch_name</em>, <em>arg_specifier</em>, <em>command_template</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#Launcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.Launcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="param.parameterized-module.html#param.parameterized.Parameterized" title="param.parameterized.Parameterized"><tt class="xref py py-class docutils literal"><span class="pre">param.parameterized.Parameterized</span></tt></a></p>
<p>A Launcher is constructed using a name, an argument specifier and a command
template and launches the corresponding tasks appropriately when invoked.</p>
<p>This default Launcher uses subprocess to launch tasks. It is intended to
illustrate the basic design and should be used as a base class for more
complex Launchers. In particular all Launchers should retain the same
behaviour of writing stdout/stderr to the streams directory, writing a log
file and recording launch information.</p>
<dl class="docutils">
<dt><em>param Callable</em> <tt class="docutils literal"><span class="pre">reduction_fn</span></tt> (<em>constant=False, default=None, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>A callable that will be invoked when the Launcher has completed all
             tasks. For example, this can be used to collect and analyse data
             generated across tasks (eg. reduce across maps in a
             RunBatchAnalysis), inform the user of completion (eg. send an
             e-mail) among other possibilities.</dd>
<dt><em>param NumericTuple</em> <tt class="docutils literal"><span class="pre">timestamp</span></tt> (<em>constant=False, default=(0, 0, 0, 0, 0, 0, 0, 0, 0), instantiate=False, length=9, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>Optional override of timestamp (default timestamp set on launch
            call) in Python struct_time 9-tuple format.  Useful when you need to
            have a known root_directory path (see root_directory documentation)
            before launch. For example, you should store state related to
            analysis (eg. pickles) in the same location as everything else.</dd>
<dt><em>param String</em> <tt class="docutils literal"><span class="pre">tag</span></tt> (<em>allow_None=False, constant=False, default=, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>A very short, identifiable human-readable string that
               meaningfully describes the batch to be executed. Should not
               include spaces as it may be used in filenames.</dd>
<dt><em>param ClassSelector</em> <tt class="docutils literal"><span class="pre">arg_specifier</span></tt> (<em>allow_None=True, constant=True, default=None, instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The specifier used to generate the varying parameters for the tasks.</dd>
<dt><em>param Callable</em> <tt class="docutils literal"><span class="pre">metric_loader</span></tt> (<em>constant=False, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The function that will load the metric files generated by the
             task. By default uses pickle.load but json.load is also valid
             option. The callable must take a file object argument and return a
             python object. A third interchange format that might be considered
             is cvs but it is up to the user to implement the corresponding
             loader.</dd>
<dt><em>param Integer</em> <tt class="docutils literal"><span class="pre">max_concurrency</span></tt> (<em>allow_None=True, bounds=None, constant=False, default=2, inclusive_bounds=(True, True), instantiate=False, pickle_default_value=True, precedence=None, readonly=False, time_fn=None</em>)</dt>
<dd>Concurrency limit to impose on the launch. As the current class
             uses subprocess locally, multiple processes are possible at
             once. Set to None for no limit (eg. for clusters)</dd>
<dt><em>param Dict</em> <tt class="docutils literal"><span class="pre">metadata</span></tt> (<em>allow_None=False, constant=False, default={}, instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>Metadata information to add to the info file.</dd>
<dt><em>param ClassSelector</em> <tt class="docutils literal"><span class="pre">command_template</span></tt> (<em>allow_None=True, constant=True, default=None, instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The command template used to generate the commands for the current tasks.</dd>
<dt><em>param String</em> <tt class="docutils literal"><span class="pre">timestamp_format</span></tt> (<em>allow_None=True, constant=False, default=%Y-%m-%d_%H%M, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The timestamp format for the root directories in python datetime
             format. If None, the timestamp is omitted from root directory name.</dd>
<dt><em>param String</em> <tt class="docutils literal"><span class="pre">description</span></tt> (<em>allow_None=False, constant=False, default=, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>A short description of the purpose of the current set of tasks.</dd>
</dl>
<dl class="method">
<dt id="lancet.launch.Launcher.append_log">
<tt class="descname">append_log</tt><big>(</big><em>specs</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#Launcher.append_log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.Launcher.append_log" title="Permalink to this definition">¶</a></dt>
<dd><p>The log contains the tids and corresponding specifications used during
launch with the specifications in json format.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.Launcher.extract_metrics">
<tt class="descname">extract_metrics</tt><big>(</big><em>tids</em>, <em>launchinfo</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#Launcher.extract_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.Launcher.extract_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to extract the metrics generated by the tasks required to update
the argument specifier (if dynamic). Uses the metric loader to extract
the metric files of the &#8216;metrics&#8217; subdirectory in the root
directory. Metric files should always include the tid in their name for
uniqueness and all metric files of the same tid will be returned
together.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.Launcher.launch">
<tt class="descname">launch</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#Launcher.launch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.Launcher.launch" title="Permalink to this definition">¶</a></dt>
<dd><p>The method that starts Launcher execution. Typically called by a launch
helper.  This could be called directly by the users but the risk is that
if __name__==&#8217;__main__&#8217; is omitted, the launcher may rerun on any import
of the script effectively creating a fork-bomb.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.Launcher.limit_concurrency">
<tt class="descname">limit_concurrency</tt><big>(</big><em>elements</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#Launcher.limit_concurrency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.Launcher.limit_concurrency" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function that breaks list of elements into chunks (sublists) of
size self.max_concurrency.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.Launcher.record_info">
<tt class="descname">record_info</tt><big>(</big><em>setup_info=None</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#Launcher.record_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.Launcher.record_info" title="Permalink to this definition">¶</a></dt>
<dd><p>All launchers should call this method to write the info file at the end
of the launch. The info file saves the given setup_info, usually the
launch dict returned by _setup_launch. The file is written to the
root_directory. When called without setup_info, the existing info file
is being updated with the end-time.</p>
</dd></dl>

<dl class="classmethod">
<dt id="lancet.launch.Launcher.resume_launch">
<em class="property">classmethod </em><tt class="descname">resume_launch</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#Launcher.resume_launch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.Launcher.resume_launch" title="Permalink to this definition">¶</a></dt>
<dd><p>Class method to allow Launchers to be controlled from the
environment.  If the environment is processed and the launcher
is resuming, return True, otherwise return False.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.Launcher.root_directory_name">
<tt class="descname">root_directory_name</tt><big>(</big><em>timestamp=None</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#Launcher.root_directory_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.Launcher.root_directory_name" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper method that gives the root direcory name given a timestamp</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lancet.launch.QLauncher">
<em class="property">class </em><tt class="descclassname">lancet.launch.</tt><tt class="descname">QLauncher</tt><big>(</big><em>batch_name</em>, <em>arg_specifier</em>, <em>command_template</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#QLauncher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.QLauncher" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lancet.launch.Launcher" title="lancet.launch.Launcher"><tt class="xref py py-class docutils literal"><span class="pre">lancet.launch.Launcher</span></tt></a></p>
<p>Launcher that operates the Sun Grid Engine using default arguments suitable
for running on the Edinburgh Eddie cluster. Allows automatic parameter
search strategies such as hillclimbing to be used, queueing jobs without
arguments without blocking (via specification files).</p>
<p>One of the main features of this class is that it is non-blocking - it alway
exits shortly after invoking qsub. This means that the script is not left
running, waiting for long periods of time on the cluster. This is
particularly important for long simulation where you wish to run some code
at the end of the simulation (eg. plotting your results) or when waiting for
results from runs (eg. waiting for results from 100 seeds to update your
hillclimbing algorithm).</p>
<p>To achieve this, QLauncher qsubs a job that relaunches the user&#8217;s lancet
script which can then instructs the Qlauncher to continue with
&#8216;collate_and_launch&#8217; step (via environment variable). Collating refers to
either collecting output from a subset of runs to update the argument specifier
or to a final reduction operation over all the results. Jobs are qsubbed
with dependencies on the previous collate step and conversely each collate
step depends on the all the necessary tasks steps reaching completion.</p>
<p>By convention the standard output and error streams go to the corresponding
folders in the &#8216;streams&#8217; subfolder of the root directory - any -o or -e qsub
options will be overridden. The job name (the -N flag) is specified
automatically and any user value will be ignored.</p>
<dl class="docutils">
<dt><em>param Callable</em> <tt class="docutils literal"><span class="pre">reduction_fn</span></tt> (<em>constant=False, default=None, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>A callable that will be invoked when the Launcher has completed all
             tasks. For example, this can be used to collect and analyse data
             generated across tasks (eg. reduce across maps in a
             RunBatchAnalysis), inform the user of completion (eg. send an
             e-mail) among other possibilities.</dd>
<dt><em>param NumericTuple</em> <tt class="docutils literal"><span class="pre">timestamp</span></tt> (<em>constant=False, default=(0, 0, 0, 0, 0, 0, 0, 0, 0), instantiate=False, length=9, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>Optional override of timestamp (default timestamp set on launch
            call) in Python struct_time 9-tuple format.  Useful when you need to
            have a known root_directory path (see root_directory documentation)
            before launch. For example, you should store state related to
            analysis (eg. pickles) in the same location as everything else.</dd>
<dt><em>param List</em> <tt class="docutils literal"><span class="pre">qsub_switches</span></tt> (<em>bounds=(0, None), constant=False, default=[&#8216;-V&#8217;, &#8216;-cwd&#8217;], instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>Specifies the qsub switches (flags without arguments) as a list of
          strings. By default the -V switch is used to exports all environment
          variables in the host environment to the batch job.</dd>
<dt><em>param String</em> <tt class="docutils literal"><span class="pre">tag</span></tt> (<em>allow_None=False, constant=False, default=, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>A very short, identifiable human-readable string that
               meaningfully describes the batch to be executed. Should not
               include spaces as it may be used in filenames.</dd>
<dt><em>param ClassSelector</em> <tt class="docutils literal"><span class="pre">arg_specifier</span></tt> (<em>allow_None=True, constant=True, default=None, instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The specifier used to generate the varying parameters for the tasks.</dd>
<dt><em>param Callable</em> <tt class="docutils literal"><span class="pre">metric_loader</span></tt> (<em>constant=False, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The function that will load the metric files generated by the
             task. By default uses pickle.load but json.load is also valid
             option. The callable must take a file object argument and return a
             python object. A third interchange format that might be considered
             is cvs but it is up to the user to implement the corresponding
             loader.</dd>
<dt><em>param Dict</em> <tt class="docutils literal"><span class="pre">qsub_flag_options</span></tt> (<em>allow_None=False, constant=False, default={&#8216;-b&#8217;: &#8216;y&#8217;}, instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>Specifies qsub flags and their corresponding options as a
          dictionary. Valid values may be strings or lists of string.  If a
          plain Python dictionary is used, the keys are alphanumerically sorted,
          otherwise the dictionary is assumed to be an OrderedDict (Python 2.7+,
          Python3 or param.external.OrderedDict) and the key ordering will be
          preserved.

          By default the -b (binary) flag is set to &#8216;y&#8217; to allow binaries to be
          directly invoked. Note that the &#8216;-&#8216; is added to the key if missing (to
          make into a valid flag) so you can specify using keywords in the dict
          constructor: ie. using qsub_flag_options=dict(key1=value1,
          key2=value2, ....)</dd>
<dt><em>param Integer</em> <tt class="docutils literal"><span class="pre">max_concurrency</span></tt> (<em>allow_None=True, bounds=None, constant=False, default=2, inclusive_bounds=(True, True), instantiate=False, pickle_default_value=True, precedence=None, readonly=False, time_fn=None</em>)</dt>
<dd>Concurrency limit to impose on the launch. As the current class
             uses subprocess locally, multiple processes are possible at
             once. Set to None for no limit (eg. for clusters)</dd>
<dt><em>param String</em> <tt class="docutils literal"><span class="pre">script_path</span></tt> (<em>allow_None=True, constant=False, default=None, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>For python environments, this is the path to the lancet script
         allowing the QLauncher to collate jobs. The lancet script is run with
         the LANCET_ANALYSIS_DIR environment variable set appropriately. This
         allows the launcher to resume launching jobs when using dynamic
         argument specifiers or when performing a reduction step.

         If set to None, the command template executable (whatever it may be) is
         executed with the environment variable set.</dd>
<dt><em>param Dict</em> <tt class="docutils literal"><span class="pre">metadata</span></tt> (<em>allow_None=False, constant=False, default={}, instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>Metadata information to add to the info file.</dd>
<dt><em>param ClassSelector</em> <tt class="docutils literal"><span class="pre">command_template</span></tt> (<em>allow_None=True, constant=True, default=None, instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The command template used to generate the commands for the current tasks.</dd>
<dt><em>param String</em> <tt class="docutils literal"><span class="pre">timestamp_format</span></tt> (<em>allow_None=True, constant=False, default=%Y-%m-%d_%H%M, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The timestamp format for the root directories in python datetime
             format. If None, the timestamp is omitted from root directory name.</dd>
<dt><em>param String</em> <tt class="docutils literal"><span class="pre">description</span></tt> (<em>allow_None=False, constant=False, default=, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>A short description of the purpose of the current set of tasks.</dd>
</dl>
<dl class="method">
<dt id="lancet.launch.QLauncher.collate_and_launch">
<tt class="descname">collate_and_launch</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#QLauncher.collate_and_launch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.QLauncher.collate_and_launch" title="Permalink to this definition">¶</a></dt>
<dd><p>Method that collates the previous jobs and launches the next block of
concurrent jobs. The launch type can be either static or dynamic (using
schedule, queue and specify for dynamic argument specifiers).  This method is
invoked on initial launch and then subsequently via the commandline to
collate the previously run jobs and launching the next block of jobs.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.QLauncher.dynamic_qsub">
<tt class="descname">dynamic_qsub</tt><big>(</big><em>output_dir</em>, <em>error_dir</em>, <em>tid_specs</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#QLauncher.dynamic_qsub"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.QLauncher.dynamic_qsub" title="Permalink to this definition">¶</a></dt>
<dd><p>This method handles dynamic argument specifiers where the dynamic
argument specifier can be queued before the arguments are computed.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.QLauncher.launch">
<tt class="descname">launch</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#QLauncher.launch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.QLauncher.launch" title="Permalink to this definition">¶</a></dt>
<dd><p>Main entry point for the launcher. Collects the static information about
the launch and sets up the stdout and stderr stream output
directories. Generates the first call to collate_and_launch().</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.QLauncher.qdel_batch">
<tt class="descname">qdel_batch</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#QLauncher.qdel_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.QLauncher.qdel_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs qdel command to remove all remaining queued jobs using the
&lt;batch_name&gt;* pattern . Necessary when StopIteration is raised with
scheduled jobs left on the queue.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.QLauncher.qsub_args">
<tt class="descname">qsub_args</tt><big>(</big><em>override_options</em>, <em>cmd_args</em>, <em>append_options=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#QLauncher.qsub_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.QLauncher.qsub_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to generate Popen style argument list for qsub using the
qsub_switches and qsub_flag_options parameters. Switches are returned
first. The qsub_flag_options follow in keys() ordered if not a vanilla
Python dictionary (ie. a Python 2.7+ or param.external OrderedDict).
Otherwise the keys are sorted alphanumerically. Note that
override_options is a list of key-value pairs.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.QLauncher.qsub_collate_and_launch">
<tt class="descname">qsub_collate_and_launch</tt><big>(</big><em>output_dir</em>, <em>error_dir</em>, <em>job_names</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#QLauncher.qsub_collate_and_launch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.QLauncher.qsub_collate_and_launch" title="Permalink to this definition">¶</a></dt>
<dd><p>The method that actually runs qsub to invoke the user launch script with
the necessary environment variable to trigger the next collation step
and next block of jobs.</p>
</dd></dl>

<dl class="classmethod">
<dt id="lancet.launch.QLauncher.resume_launch">
<em class="property">classmethod </em><tt class="descname">resume_launch</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#QLauncher.resume_launch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.QLauncher.resume_launch" title="Permalink to this definition">¶</a></dt>
<dd><p>Resumes the execution of the launcher if environment contains
LANCET_ANALYSIS_DIR. This information allows the
launcher.pickle file to be unpickled to resume the launch.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.QLauncher.static_qsub">
<tt class="descname">static_qsub</tt><big>(</big><em>output_dir</em>, <em>error_dir</em>, <em>tid_specs</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#QLauncher.static_qsub"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.QLauncher.static_qsub" title="Permalink to this definition">¶</a></dt>
<dd><p>This method handles static argument specifiers and cases where the
dynamic specifiers cannot be queued before the arguments are known.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lancet.launch.review_and_launch">
<em class="property">class </em><tt class="descclassname">lancet.launch.</tt><tt class="descname">review_and_launch</tt><big>(</big><em>launcher_class</em>, <em>output_directory='.'</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#review_and_launch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.review_and_launch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="param.parameterized-module.html#param.parameterized.Parameterized" title="param.parameterized.Parameterized"><tt class="xref py py-class docutils literal"><span class="pre">param.parameterized.Parameterized</span></tt></a></p>
<p>The basic example of the sort of helper that is highly recommended for
launching:</p>
<p>1) The lancet script may include objects/class that need to be imported
(eg. for accessing analysis functions) to execute the tasks. By default this
would execute the whole script and therefore re-run the Launcher which would
cause a fork-bomb! This decorator only executes the launcher that is
returned by the wrapped function if __name__==&#8217;__main__&#8217;</p>
<p>Code in the script after Launcher execution has been invoked is not
guaranteed to execute <em>after</em> all tasks are complete (eg. due to forking,
subprocess, qsub etc). This decorator helps solves this issue, making sure
launch is the last thing in the definition function. The reduction_fn
parameter is the proper way of executing code after the Launcher exits.</p>
<dl class="docutils">
<dt><em>param Boolean</em> <tt class="docutils literal"><span class="pre">review</span></tt> (<em>allow_None=False, bounds=(0, 1), constant=False, default=True, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>Whether or not to perform a detailed review of the launch.</dd>
<dt><em>param String</em> <tt class="docutils literal"><span class="pre">output_directory</span></tt> (<em>allow_None=False, constant=False, default=., instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The output directory - the directory that will contain all the root
         directories for the individual launches.</dd>
<dt><em>param Callable</em> <tt class="docutils literal"><span class="pre">launch_fn</span></tt> (<em>constant=False, default=None, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The function that is to be applied.</dd>
<dt><em>param Parameter</em> <tt class="docutils literal"><span class="pre">launcher_class</span></tt> (<em>constant=False, default=None, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>The launcher class used for this lancet script.  Necessary to access
         launcher classmethods (to resume launch for example).</dd>
<dt><em>param ClassSelector</em> <tt class="docutils literal"><span class="pre">launch_args</span></tt> (<em>allow_None=True, constant=False, default=None, instantiate=True, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>An optional argument specifier to parameterise lancet,
                 allowing multi-launch scripts.  Useful for collecting
                 statistics over runs that are not deterministic or are affected
                 by a random seed for example.</dd>
<dt><em>param Boolean</em> <tt class="docutils literal"><span class="pre">main_script</span></tt> (<em>allow_None=False, bounds=(0, 1), constant=False, default=True, instantiate=False, pickle_default_value=True, precedence=None, readonly=False</em>)</dt>
<dd>Whether the launch is occuring from a lancet script running as
         main. Set to False for projects using lancet outside the main script.</dd>
</dl>
<dl class="method">
<dt id="lancet.launch.review_and_launch.configure_launch">
<tt class="descname">configure_launch</tt><big>(</big><em>lval</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#review_and_launch.configure_launch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.review_and_launch.configure_launch" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook to allow the Launch helper to autoconfigure launches as
appropriate.  For example, can be used to save objects in their final
state. Return True if configuration successful, False to cancel the
entire launch.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.review_and_launch.cross_check_launchers">
<tt class="descname">cross_check_launchers</tt><big>(</big><em>launchers</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#review_and_launch.cross_check_launchers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.review_and_launch.cross_check_launchers" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs consistency checks across all the launchers.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.review_and_launch.input_options">
<tt class="descname">input_options</tt><big>(</big><em>options</em>, <em>prompt='Select option'</em>, <em>default=None</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#review_and_launch.input_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.review_and_launch.input_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to prompt the user for input on the commandline.</p>
</dd></dl>

<dl class="method">
<dt id="lancet.launch.review_and_launch.review_args">
<tt class="descname">review_args</tt><big>(</big><em>obj</em>, <em>heading='Argument Specification'</em><big>)</big><a class="reference internal" href="../_modules/lancet/launch.html#review_and_launch.review_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lancet.launch.review_and_launch.review_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Input argument obj can be a Launcher or an ArgSpec object.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/topo-banner7.png" alt="Logo"/>
            </a></p>
<ul class="global-toc">
<li><a href="../index.html">Home</a></li>
<li><a href="../News/index.html">News</a></li>
<li><a href="../Downloads/index.html">Downloads</a></li>
<li><a href="../Tutorials/index.html">Tutorials</a></li>
<li><a href="../User_Manual/index.html">User Manual</a></li>
<li><a href="index.html">Reference Manual</a></li>
<li><a href="../Developer_Manual/index.html">Developer Manual</a></li>
<li><a href="../Forums/index.html">Forums</a></li>
<li><a href="../Team_Members/index.html">Team Members</a></li>
<li><a href="../Future_Work/index.html">Future Work</a></li>
<li><a href="../FAQ/index.html">FAQ</a></li>
<li><a href="../Links/index.html">Links</a></li>
<li><a href="../Home/pubs.html">Publications</a></li>
</ul>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li><a class="reference internal" href="#">lancet.launch</a><ul>
<li><a class="reference internal" href="#module-lancet.launch">Module</a></li>
</ul>
</li>
</ul>


<h3>This Page</h3>
<ul class="this-page-menu">
	<li><a	href="https://github.com/ioam/topographica/edit/master/doc/Reference_Manual/lancet.launch-module.rst" rel="nofollow">Edit on GitHub</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
<li><a href="../index.html">Home</a></li>
<li><a href="../Downloads/index.html">Downloads</a></li>
<li><a href="../Tutorials/index.html">Tutorials</a></li>
<li><a href="../User_Manual/index.html">User Manual</a></li>






      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, IOAM.
      Last updated on Jul 25, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>