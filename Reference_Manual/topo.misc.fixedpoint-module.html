
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>topo.misc.fixedpoint &mdash; The Topographica Neural Map Simulator</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/topo.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.98',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/topo.js"></script>
    <link rel="top" title="The Topographica Neural Map Simulator" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
<li><a href="../index.html">Home</a></li>
<li><a href="../Downloads/index.html">Downloads</a></li>
<li><a href="../Tutorials/index.html">Tutorials</a></li>
<li><a href="../User_Manual/index.html">User Manual</a></li>






      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="topo-misc-fixedpoint">
<h1>topo.misc.fixedpoint<a class="headerlink" href="#topo-misc-fixedpoint" title="Permalink to this headline">¶</a></h1>
<div class="inheritance_box"><img src="../_images/inheritance6d5f95fcb7.svg" usemap="#inheritance6d5f95fcb7" class="inheritance"/></div><map id="inheritance6d5f95fcb7" name="inheritance6d5f95fcb7">
</map>
<div class="section" id="module-topo.misc.fixedpoint">
<span id="module"></span><h2>Module<a class="headerlink" href="#module-topo.misc.fixedpoint" title="Permalink to this headline">¶</a></h2>
<p>FixedPoint objects support decimal arithmetic with a fixed number of
digits (called the object&#8217;s precision) after the decimal point.  The
number of digits before the decimal point is variable &amp; unbounded.</p>
<p>The precision is user-settable on a per-object basis when a FixedPoint
is constructed, and may vary across FixedPoint objects.  The precision
may also be changed after construction via FixedPoint.set_precision(p).
Note that if the precision of a FixedPoint is reduced via set_precision,
information may be lost to rounding.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">FixedPoint</span><span class="p">(</span><span class="s">&quot;5.55&quot;</span><span class="p">)</span>  <span class="c"># precision defaults to 2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">x</span>
<span class="go">5.55</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">set_precision</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>      <span class="c"># round to one fraction digit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">x</span>
<span class="go">5.6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">FixedPoint</span><span class="p">(</span><span class="s">&quot;5.55&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c"># same thing setting to 1 in constructor</span>
<span class="go">5.6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c">#  returns constructor string that reproduces object exactly</span>
<span class="go">&quot;FixedPoint(&#39;5.6&#39;, 1)&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>When FixedPoint objects of different precision are combined via + - * /,
the result is computed to the larger of the inputs&#8217; precisions, which also
becomes the precision of the resulting FixedPoint object.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">FixedPoint</span><span class="p">(</span><span class="s">&quot;3.42&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">FixedPoint</span><span class="p">(</span><span class="s">&quot;100.005&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">103.425</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>When a FixedPoint is combined with other numeric types (ints, floats,
strings representing a number) via + - * /, then similarly the computation
is carried out using&#8211; and the result inherits &#8211;the FixedPoint&#8217;s
precision.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">FixedPoint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7</span>
<span class="go">0.14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">FixedPoint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7</span>
<span class="go">0.142857142857142857142857142857</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>The string produced by str(x) (implictly invoked by &#8220;print&#8221;) always
contains at least one digit before the decimal point, followed by a
decimal point, followed by exactly x.get_precision() digits.  If x is
negative, str(x)[0] == &#8220;-&#8221;.</p>
<p>The FixedPoint constructor can be passed an int, long, string, float,
FixedPoint, or any object convertible to a float via float() or to a
long via long().  Passing a precision is optional; if specified, the
precision must be a non-negative int.  There is no inherent limit on
the size of the precision, but if very very large you&#8217;ll probably run
out of memory.</p>
<p>Note that conversion of floats to FixedPoint can be surprising, and
should be avoided whenever possible.  Conversion from string is exact
(up to final rounding to the requested precision), so is greatly
preferred.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">FixedPoint</span><span class="p">(</span><span class="mf">1.1e30</span><span class="p">)</span>
<span class="go">1099999999999999993725589651456.00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">FixedPoint</span><span class="p">(</span><span class="s">&quot;1.1e30&quot;</span><span class="p">)</span>
<span class="go">1100000000000000000000000000000.00</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>The following Python operators and functions accept FixedPoints in the
expected ways:</p>
<blockquote>
<div><dl class="docutils">
<dt>binary + - * / % divmod</dt>
<dd><p class="first">with auto-coercion of other types to FixedPoint.
+ - % divmod  of FixedPoints are always exact.
* / of FixedPoints may lose information to rounding, in</p>
<blockquote>
<div>which case the result is the infinitely precise answer
rounded to the result&#8217;s precision.</div></blockquote>
<dl class="last docutils">
<dt>divmod(x, y) returns (q, r) where q is a long equal to</dt>
<dd>floor(x/y) as if x/y were computed to infinite precision,
and r is a FixedPoint equal to x - q * y; no information
is lost.  Note that q has the sign of y, and abs(r) &lt; abs(y).</dd>
</dl>
</dd>
</dl>
<p>unary -
== != &lt; &gt; &lt;= &gt;=  cmp
min  max
float  int  long    (int and long truncate)
abs
str  repr
hash
use as dict keys
use as boolean (e.g. &#8220;if some_FixedPoint:&#8221; &#8211; true iff not zero)</p>
</div></blockquote>
<dl class="docutils">
<dt>Methods unique to FixedPoints:</dt>
<dd>.copy()              return new FixedPoint with same value
.frac()              long(x) + x.frac() == x
.get_precision()     return the precision(p) of this FixedPoint object
.set_precision(p)    set the precision of this FixedPoint object</dd>
</dl>
<p>Provided as-is; use at your own risk; no warranty; no promises; enjoy!</p>
<dl class="class">
<dt id="topo.misc.fixedpoint.FixedPoint">
<em class="property">class </em><tt class="descclassname">topo.misc.fixedpoint.</tt><tt class="descname">FixedPoint</tt><big>(</big><em>value=0</em>, <em>precision=None</em><big>)</big><a class="reference internal" href="../_modules/topo/misc/fixedpoint.html#FixedPoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#topo.misc.fixedpoint.FixedPoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Basic FixedPoint object class,
The exact value is self.n / 10**self.p;
self.n is a long; self.p is an int</p>
<dl class="method">
<dt id="topo.misc.fixedpoint.FixedPoint.frac">
<tt class="descname">frac</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/topo/misc/fixedpoint.html#FixedPoint.frac"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#topo.misc.fixedpoint.FixedPoint.frac" title="Permalink to this definition">¶</a></dt>
<dd><p>Return fractional portion as a FixedPoint.</p>
<p>x.frac() + long(x) == x</p>
</dd></dl>

<dl class="method">
<dt id="topo.misc.fixedpoint.FixedPoint.get_precision">
<tt class="descname">get_precision</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/topo/misc/fixedpoint.html#FixedPoint.get_precision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#topo.misc.fixedpoint.FixedPoint.get_precision" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the precision of this FixedPoint.</p>
<p>The precision is the number of decimal digits carried after
the decimal point, and is an int &gt;= 0.</p>
</dd></dl>

<dl class="attribute">
<dt id="topo.misc.fixedpoint.FixedPoint.precision">
<tt class="descname">precision</tt><a class="headerlink" href="#topo.misc.fixedpoint.FixedPoint.precision" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the precision of this FixedPoint.</p>
<p>The precision is the number of decimal digits carried after
the decimal point, and is an int &gt;= 0.</p>
</dd></dl>

<dl class="method">
<dt id="topo.misc.fixedpoint.FixedPoint.round">
<tt class="descname">round</tt><big>(</big><em>dividend</em>, <em>divisor</em>, <em>quotient</em>, <em>remainder</em><big>)</big><a class="headerlink" href="#topo.misc.fixedpoint.FixedPoint.round" title="Permalink to this definition">¶</a></dt>
<dd><p>rounding via nearest-even
increment the quotient if</p>
<blockquote>
<div><blockquote>
<div>the remainder is more than half of the divisor</div></blockquote>
<p>or the remainder is exactly half the divisor and the quotient is odd</p>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="topo.misc.fixedpoint.FixedPoint.set_precision">
<tt class="descname">set_precision</tt><big>(</big><em>precision=2</em><big>)</big><a class="reference internal" href="../_modules/topo/misc/fixedpoint.html#FixedPoint.set_precision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#topo.misc.fixedpoint.FixedPoint.set_precision" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the precision carried by this FixedPoint to p.</p>
<p>precision must be an int &gt;= 0, and defaults to
DEFAULT_PRECISION.</p>
<p>If precision is less than this FixedPoint&#8217;s current precision,
information may be lost to rounding.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="topo.misc.fixedpoint.addHalfAndChop">
<tt class="descclassname">topo.misc.fixedpoint.</tt><tt class="descname">addHalfAndChop</tt><big>(</big><em>self</em>, <em>dividend</em>, <em>divisor</em>, <em>quotient</em>, <em>remainder</em><big>)</big><a class="reference internal" href="../_modules/topo/misc/fixedpoint.html#addHalfAndChop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#topo.misc.fixedpoint.addHalfAndChop" title="Permalink to this definition">¶</a></dt>
<dd><p>the equivalent of &#8216;add half and chop&#8217;
increment the quotient if</p>
<blockquote>
<div><blockquote>
<div>the remainder is greater than half of the divisor</div></blockquote>
<p>or the remainder is exactly half the divisor and the quotient is &gt;= 0</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="topo.misc.fixedpoint.bankersRounding">
<tt class="descclassname">topo.misc.fixedpoint.</tt><tt class="descname">bankersRounding</tt><big>(</big><em>self</em>, <em>dividend</em>, <em>divisor</em>, <em>quotient</em>, <em>remainder</em><big>)</big><a class="reference internal" href="../_modules/topo/misc/fixedpoint.html#bankersRounding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#topo.misc.fixedpoint.bankersRounding" title="Permalink to this definition">¶</a></dt>
<dd><p>rounding via nearest-even
increment the quotient if</p>
<blockquote>
<div><blockquote>
<div>the remainder is more than half of the divisor</div></blockquote>
<p>or the remainder is exactly half the divisor and the quotient is odd</p>
</div></blockquote>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/topo-banner7.png" alt="Logo"/>
            </a></p>
<ul class="global-toc">
<li><a href="../index.html">Home</a></li>
<li><a href="../News/index.html">News</a></li>
<li><a href="../Downloads/index.html">Downloads</a></li>
<li><a href="../Tutorials/index.html">Tutorials</a></li>
<li><a href="../User_Manual/index.html">User Manual</a></li>
<li><a href="index.html">Reference Manual</a></li>
<li><a href="../Developer_Manual/index.html">Developer Manual</a></li>
<li><a href="../Forums/index.html">Forums</a></li>
<li><a href="../Team_Members/index.html">Team Members</a></li>
<li><a href="../Future_Work/index.html">Future Work</a></li>
<li><a href="../FAQ/index.html">FAQ</a></li>
<li><a href="../Links/index.html">Links</a></li>
<li><a href="../Home/pubs.html">Publications</a></li>
</ul>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li><a class="reference internal" href="#">topo.misc.fixedpoint</a><ul>
<li><a class="reference internal" href="#module-topo.misc.fixedpoint">Module</a></li>
</ul>
</li>
</ul>


<h3>This Page</h3>
<ul class="this-page-menu">
	<li><a	href="https://github.com/ioam/topographica/edit/master/doc/Reference_Manual/topo.misc.fixedpoint-module.rst" rel="nofollow">Edit on GitHub</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
<li><a href="../index.html">Home</a></li>
<li><a href="../Downloads/index.html">Downloads</a></li>
<li><a href="../Tutorials/index.html">Tutorials</a></li>
<li><a href="../User_Manual/index.html">User Manual</a></li>






      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, IOAM.
      Last updated on Oct 25, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>